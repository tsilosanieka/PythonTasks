# Django Tests

This task involved writing unit tests for a model's custom method and a simple view test for an API endpoint using Django's built-in `TestCase`.

## Model Setup 
The `BlogPost` model, as specified in the exercise, was added to the `api/models.py` file.

```python
from django.db import models
from django.conf import settings

# ... (Existing models: Author, Book, Article, Product) ...

class BlogPost(models.Model):
    title = models.CharField(max_length=100)
    content = models.TextField()

    def short_title(self):
        if len(self.title) > 10:
            return self.title[:10] + "..."
        else:
            return self.title
```

Migrations were run to add this model to the database:
`python manage.py makemigrations api`
`python manage.py migrate`

## Test Implementation 

The `api/tests.py` file was updated to include `BlogPostModelTest` as required by the task, alongside the existing tests for the `Article` model.

```python
from django.test import TestCase
from django.urls import reverse
from .models import Article, BlogPost
from users.models import CustomUser

class ArticleModelTest(TestCase):
    def setUp(self):
        self.author = CustomUser.objects.create_user(
            email='test@user.com', 
            first_name='Test', 
            last_name='User',
            password='123'
        )

    def test_article_str_method(self):
        article = Article(title="A short title", content="Some content", author=self.author)
        self.assertEqual(str(article), "A short title")

class ArticleViewTest(TestCase):
    def setUp(self):
        self.author = CustomUser.objects.create_user(
            email='test@user.com', 
            first_name='Test', 
            last_name='User',
            password='123'
        )
        Article.objects.create(
            title="My Test Article", 
            content="This is the content.",
            author=self.author
        )

    def test_article_list_view_works(self):
        url = reverse('article-list')
        response = self.client.get(url)
        self.assertEqual(response.status_code, 200)
        self.assertContains(response, "My Test Article")

class BlogPostModelTest(TestCase):

    def test_short_title_is_short(self):
        post = BlogPost(title="A short", content="Some content")
        self.assertEqual(post.short_title(), "A short")

    def test_short_title_is_long(self):
        post = BlogPost(title="A very long title", content="Some content")
        self.assertEqual(post.short_title(), "A very lon...")
```

## Test Results

The tests were run using the `python manage.py test api` command. All 4 tests passed successfully.

```bash
(.venv) PS C:\Users...> python manage.py test api
Found 4 test(s).
Creating test database for alias 'default'...
System check identified no issues (0 silenced).
.C:\Users\...\.venv\Lib\site-packages\rest_framework\pagination.py:207: UnorderedObjectListWarning: Pagination may yield inconsistent results with an unordered object_list: <class 'api.models.Article'> QuerySet.
  paginator = self.django_paginator_class(queryset, page_size)
...
----------------------------------------------------------------------
Ran 4 tests in 1.022s

OK
Destroying test database for alias 'default'...
```
